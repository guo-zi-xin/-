# Vue

### vue的核心

Vue是一套构建用户界面的渐进式、自底向上增量开发的 MVVM 模型的框架， vue的核心只关注视图层

##### 核心思想

- 数据驱动(视图内容随着数据的改变而改变)
- 组件话(可以增加代码复用性、可维护性、可测试性，提高了开发效率， 方便重复使用， 体现了高内聚低耦合)

::: details MVVM模型
**定义**

MVVM(Model-View-ViewModel)是一种前端设计模式，它将应用程序分为三个部分：模型(Model)、视图(View)和视图模型(ViewModel)。 这种设计模式有助于实现前端应用程序的解耦和可维护性

**基本概念**

- 模型(Model): 模型是应用程序的数据部分，包含了应用程序的数据和业务逻辑，模型通常通过AJAX请求与后端交互，以获取或更新数据
- 视图(View): 视图是用户界面的一部分，负则呈现模型数据，视图通常是用 HTML 和 CSS 编写的，可以使用模版引擎来渲染动态数据。
- 视图模型(ViewModel): ViewModel是链接模型和视图的桥梁，它负责将模型数据映射到视图上，并将用户的交互事件传递给模型。 ViewModel可以使用数据绑定来自动更新视图，当模型数据发生改变时
  视图自动更新

在 MVVM 中， 最重要的部分是数据绑定和双向数据绑定

*数据绑定* 是指将视图中的元素绑定到模型数据的过程，当模型数据发生变化时， 视图将自动更新

*双向数据绑定* 是指同时将视图中的元素绑定到模型数据，并将模型数据绑定到视图中的元素，当视图或模型中的数据发生变化时，另一部分将自动更新

**MVVM优点**

1. *关注点分离*: MVVM模式通过明确的分层将数据、用户界面和业务逻辑分离开来。这有助于提高代码可维护性和可测试性，使开发人员更容易地修改、扩展和维护不同的部分
2. *代码重用*: VIewModel 可以根据不同的视图需求进行调整，从而实现业务逻辑的重用。这允许在不同的视图之间共享共同的ViewModel
3. *团队协作*: MVVM模式的分层结构可以使不同的团队成员在不同层次上独立工作，减少了彼此的依赖性
4. *可维护性*: 由于数据逻辑与展示逻辑分开，所以对逻辑的修改和调试不影响用户界面的呈现
5. *数据绑定*: MVVM模式通常具有双向数据绑定的功能，使视图与数据保持同步，从而实现了更实时的用户体验
6. *响应式编程*: MVVM模式通常设计响应式编程范式，使数据的变化能够自动传播到相关的视图中

**MVVM缺点**

1. *复杂性*: MVVM模式引入了额外的层次和概念，可能会增加项目的初始学习成本，特别是对于初学者来说
2. *性能*: 在某些情况下，MVVM模式可能引入额外的性能开销，特别是实现数据绑定和观察者模式时。虽然现在前端框架会优化这些问题，但仍然需要注意这些问题
3. *过度工程*: 在小型应用中， 采用 MVVM 模式可能会导致过度设计，增加不必要的复杂性
4. *状态管理*: 在一些复杂的应用中，随着视图和数据逻辑的增加，可能会涉及到复杂的状态管理问题，如果不恰当地管理好状态，可能会导致应用变得难以理解和维护
:::

### Vue中的单项数据流

父级 prop 的更新都会向下流动到子组件中，每次父组件发生更新，子组件所有的 prop 都会刷新为最新的值

数据从父组件传递给子组件，只能单向绑定，子组件内部不能直接修改父组件传递过来的数据，(可以使用 data 和 computed 解决)

### Vue中常用的修饰符

|修饰符|功能|
|:---|:---|
|修饰符||
|`.lazy`|改变后触发，光标离开 input 输入框的时候值才会改变|
|`.number`|将输出字符串转化为 number 类型|
|`.trim`|自动过滤用户输入的首尾空格|
|事件修饰符||
|`.stop`|阻止点击事件冒泡，相当于原生中`event.stopPropagation()`|
|`.prevent`|防止执行预设的行为, 相当于原生中的`event.preventDefault()`|
|`.captrue`|添加事件侦听器时使用事件捕获模式，就是谁有该事件修饰符，就先触发谁|
|`.self`|只会触发自己范围内的事件，不包括子元素|
|`.once`|只执行一次|
|`.passive`|一般触摸事件的修饰符，常用于改善移动端设备的滚屏性能|
|键盘修饰符||
|`.enter`|回车键|
|`.delete`|捕获 Delete 和 Backspace 两个键位|
|`.tab`|制表键|
|`.esc`|返回键|
|`.space`|空格键|
|`.up`/`.down`/`.left`/`.right`|向上/下/左/右|
|系统按键修饰符||
|`.ctrl`/`.alt`/`.shift`/`.meta`|按下对应键位触发|

### `v-text`、`{{}}`、`v-html`区别

##### `{{}}`

模版插值`{{}}` 将数据解析成纯文本，并不能显示输出 html

##### `v-text`

`v-text` 指令操作网页元素的恶纯文本内容，与 `{{}}`等价， 只是 `v-text`叫指令， `{{}}`叫模版插值 `{{}}`是它的另一种写法

`v-text`将数据解析成纯文本，不能输出真正的 html ， 与模版插值`{{}}`区别是在页面加载时不显示双花括号

##### `v-html`

`v-html`可以渲染输出 html

### `v-on`是否可以绑定多个方法

可以的， 如果绑定多个事件，可以使用键值对形式：事件类型: 事件名；

如果绑定的是多个相同事件， 直接使用逗号分隔就可以

### Vue `v-for`循环中 `key`的作用

设置的 `key` 是保证唯一性， Vue在执行时，会对节点进行检查，如果没有key值，那么vue检查到这里有 DOM 节点，就会对内容清空并赋新值，如果有 `key` 存在，那么会对新老节点进行对比，比较两者
`key` 是否相同，进行调换位置或删除操作

### 计算属性(`computed`)

计算属性是用来声明式地描述一个值依赖了其他的值，当它依赖的这个值发生改变时，就更新 DOM

当在模版中把数据绑定到一个计算属性上时， Vue会在它依赖的任何值导致该计算属性改变时更新 DOM

每个计算属性都包括一个 getter 和 setter， 读取时触发 getter ， 修改时触发 setter

### Vuex

![Vuex](/svg/Vuex数据流向.svg)

Vuex 是一个专门为vue.js应用程序开发的状态管理模式，通过创建一个集中的数据存储，方便程序中的所有组件进行访问，是Vue的状态管理工具

Vuex有五个属性 *state* *getters* *mutations* *actions* *modules*

- *state*

  数据源存放地， 对应一般 vue 对象的 data， *state* 里存放的数据是响应式的， *state* 数据发生改变，对应这个数据的组件也会发生改变

- *getters*
  
  *getters* 相当于 store 的计算属性， 主要是对 *state* 中数据的过滤

- *mutations*
  
  *mutations* 放置了所有的处理数据逻辑的方法， 当触发事件想改变 *state* 数据的时候使用 *mutations*， 调用时添加一个参数 就是 *mutations* 的载荷

- *actions*
  
  *actions* 异步操作数据， 但是通过 *mutations*来操作，通过 *dispatch* 触发， *actions* 也支持载荷

- *modules*
  
  为了解决 *store*对象过于臃肿的问题， 将 *store* 分割成 *modules* 模块

### Vue中跳转路由的方式

Vue中路由跳转的方式有两种，分别是 声明式 和 编程式

用 js 方式进行跳转的叫做编程式导航 `this.$router.push()`

用 router-link 进行跳转的叫声明式 router-view 路由出口， 路由模版显示的位置

**路由中name的作用**

在 router-link 中使用 name 导航到对应路由

使用 name 导航的同时，给子路由传递参数

### Vue 跨域解决方案

1. 后台更改`header`
2. 使用 `http-proxy-middleware` (配置代理服务器的中间件)

87页/13
