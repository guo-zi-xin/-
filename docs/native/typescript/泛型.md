# TS 泛型

## 定义

在 TypeScript 中，泛型（Generics）是一种强大的类型工具，它允许我们编写可重用、灵活和类型安全的代码。泛型允许我们在定义函数、类或接口时使用类型参数，这些类型参数在使用时可以被动态地指定具体的类型。

**特点：**

- 不是实现定义好类型，而是在使用的时候再指定具体类型

1. 数组泛型(Array Generic)

  我们在指定一个数组的类型时，可以使用 **类型 + 中括号**表示法来定义，例如： `number[]`来作为数字数组类型，字符串数组为`string[]`, 除此之外，我们也可以使用泛型`Array<elemType>`来定义一个数组:

  ```typescript
  const arr: Array<number> = [1,2,3,4,5]
  const strArr: Array<string> = ['a','b','c']
  const anyArr: Array<any> = [1, 'b', [3,4], {text: 'c'}, null]
  ```

2. 函数泛型

  > 函数泛型允许我们编写可以适用多种类型的函数， 提高代码的灵活性和可复用性。

  **简单的例子**
  我们可以实现一个函数`createArray`, 他可以创建一个指定长度的数组， 并且将每一项填充一个默认值：

  ```typescript
  const createArray = (length: number, value: any): any[] => {
    let results: any[] = []
    for (let key = 0, key <= length; key++) {
      results[key] = value
    }
    return results
  }

  ```

  上述示例中， 由于不确定填充值`value`的类型， 使用了`any`类型来指定类型， 并且返回值也是`any`类型的数组, 虽然编译不会报错， 但我们无法得到确定的返回值的类型； 这个时候，泛型就派上用场了：

  ```typescript
    function createArray<T>(length:number, value: T): Array<T> {
      let results: Array<T> = [];
      for (let key = 0, key < length; key++) {
        results[key] = value
      }
      return results
    }
    // 箭头函数
    const createArray = <T>(length: number, value: T): Array<T> => {
      let results: Array<T> = [];
        for (let key = 0, key < length; key++) {
          results[key] = value
        }
      return results
    }
    createArray<string>(3, 'x') // 返回 ['x', 'x', 'x']
  ```

  我们在函数名后使用了`<T>`, 其中`T`表示任意类型， 后面的`value`参数和函数返回值就可以直接使用`Array<T>`了。
  在调用时，我们传入`string`类型， 表示指定他的类型为字符串， 当然也可以不指定类型， 由类型推断自动推断出来：

  ```typescript
  createArray(3, 'x') // 返回 ['x', 'x', 'x'], 通过‘x’的类型自动·推断出泛型的类型
  ```

  **多个类型参数**
  定义泛型的时候，可以一次定义多个类型参数：

  ```typescript
    function swap<T, U>(tuple: [T, U]): [U, T] {
      return [tuple[1], tuple[0]];
    }
    swap<number,string>([7, 'seven']); // ['seven', 7]
  ```
